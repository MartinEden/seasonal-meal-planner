{% extends 'base.html' %}
{% block script %}
  <script>
  $( function() {
    var all_ingredients = {{ all_ingredients|safe }};
    $( "#autocomplete-ingredient" ).autocomplete({
       source: all_ingredients
    });
  } );
  </script>
{% endblock %}
{% block title %}Search by ingredient{% endblock %}

{% block content %}
    <form method="get" class="form-inline">
        <div class="form-group mr-3">
            <label for = "autocomplete-ingredient">Ingredient name: </label>
            <input id = "autocomplete-ingredient" type="text" name="ingredient" class="form-control" />
        </div>
        <button class="btn btn-success" type="submit">Search</button>
    </form>
    {% if recipes %}
        <div class="mt-3">
        {% for ingredient, recipes in recipes.items %}
            Recipes with {{ingredient}}:
            <ul>
                {% for recipe in recipes %}
                <li><a href="{% url 'recipe' recipe.name %}">{{ recipe.name }}</a></li>
                {% endfor %}
            </ul>
        {% endfor %}
        </div>
    {% endif %}
{% endblock %}