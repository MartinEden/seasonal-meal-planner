{% extends 'base.html' %}
{% block script %}
  <script>
  $( function() {
    var tags = {{ tags|safe }};
    $( "#autocomplete-tag" ).autocomplete({
       source: tags
    });
    var ingredients = {{ ingredients|safe }};
    $( "#autocomplete-ingredient" ).autocomplete({
       source: ingredients
    });

    var dateFormat = "DD, d MM, YY",
      from = $( "#from" )
        .datepicker({
          defaultDate: "+1d",
          showButtonPanel: true,
          minDate: 0,
          maxDate: "+1W",
          hideIfNoPrevNext: true
        })
        .on( "change", function() {
          to.datepicker( "option", "minDate", getDate( this ) );
        }),
      to = $( "#to" ).datepicker({
        defaultDate: "+1w",
        showButtonPanel: true,
        maxDate: "+2W",
        minDate: 0,
        hideIfNoPrevNext: true,
      })
      .on( "change", function() {
        from.datepicker( "option", "maxDate", getDate( this ) );
      });

    function getDate( element ) {
      var date;
      try {
        date = $.datepicker.parseDate( dateFormat, element.value );
      } catch( error ) {
        date = null;
      }

      return date;
    }
  } );
  </script>
{% endblock %}

{% block title %}Plan week{% endblock %}

{% block content %}

<div class="row">
  <div class="col-12">
    <label for="from">From</label>
    <input type="text" id="from" name="from">
    <label for="to">to</label>
    <input type="text" id="to" name="to">
  </div>
</div>

<div class="row">
    <div class="col-12 mt-3">
    <h2>Constraints</h2>
    {% include "tag-constraint.html" %}
    <!--  <label for = "autocomplete-ingredient">Use up ingredients: </label>
      <input id = "autocomplete-ingredient">
      <label for = "autocomplete-ingredient-2">Consider ingredients: </label>
      <input id = "autocomplete-ingredient-2">
    -->
    </div>
</div>

<div class="row mt-5">
  <div class="col-12">
    <table class="table">
      <tr><th></th><th>People</th><th>Meal</th></tr>
      <tr>
        <td>Tues</td>
        <td><input type="number" /></td>
        <td></td>
      </tr>
    </table>
  </div>
</div>

<br/><br/><br/><br/><br/><br/><br/><br/>

<div>
[List of days]
[Add guest UI - single UI for whole week, click on day first to assign]
[Additional per-meal requirements e.g. cooking time; to be added later, currently no info in meal planner]
</div>
<div>
Constraints:
Tag - max/min - quantity
(default: max 1 meat, min 1 fish)
</div>
<button></button>
[Button - select randomly correct quantity of meals that meet requirements]
<div>
[Display results]
</div>
{% endblock %}